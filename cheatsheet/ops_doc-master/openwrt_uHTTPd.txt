config 'uhttpd' 'main'
        option 'listen_http' '80'
        option 'home'        '/www'


/usr/sbin/uhttpd -f -h /www -r OpenWrt -x /cfg-bin -u /ubus -t 60 -T 30 -k 20 -A 1 -n 3 -N 100 -R -p 0.0.0.0:80 -p [::]:80
--------------------------------------------------------
/usr/sbin/uhttpd -f -h /www -r OpenWrt -x /cgi-bin -u /ubus -t 60 -T 30 -k 20 -A 1 -n 3 -N 100 -p 0.0.0.0:80 -p [::]:80 -C /etc/uhttpd.crt -K /etc/uhttpd.key -s 0.0.0.0:443 -s [::]:443 -q
config uhttpd 'main'                    # 对应一个uhttpd服务
        list listen_http '0.0.0.0:80'   # IPv4
        list listen_http '[::]:80'      # IPv6
            # 也支持interface:port的方式
        list listen_https '0.0.0.0:443' # IPv4 encrypted HTTPS
        list listen_https '[::]:443'    # IPv6 encrypted HTTPS
        option redirect_https '1'
        option home '/www'              # directory path
        option max_requests '3'         # 并发请求数
        option max_connections '100'    # 并发链接数
        option cert '/etc/uhttpd.crt'   # /etc/uhttpd.crt   ASN.1/DER certificate used to serve HTTPS connections
        option key '/etc/uhttpd.key'    # /etc/uhttpd.key   ASN.1/DER private key used to serve HTTPS connections
        option cgi_prefix '/cgi-bin'    # CGI scripts的前缀，相对于"option home '/www'"
        1. lua_prefix  (string)    缺省为No
        2. lua_handler (file path) yes if lua_prefix is given, else no
        3. realm(string)                # 认证相关内容
        4. index_file(php才有效)        # index.html, index.htm, default.html, default.htm
        option script_timeout '60'      # 响应超时时间
        option network_timeout '30'     # 网络断开连接多久自动关闭连接
        option http_keepalive '20'      # http保活
        option tcp_keepalive '1'        # tcp保活
        option ubus_prefix '/ubus'
        option rfc1918_filter '0'

config cert 'px5g'
        option days '730'              # cert的有效时间
        option bits '2048'             # RSA的有效位数
        option country 'ZZ'            # ISO country code
        option state 'Somewhere'       # State of the certificate issuer
        option location 'Unknown'      # Location/city of the certificate issuer 
        option commonname 'OpenWrt'    # Common name covered by the certificate

/usr/sbin/uhttpd -f -h /usr/share/dump1090 -r OpenWrt -t 60 -T 30 -k 20 -A 1 -n 3 -N 100 -R -p 0.0.0.0:8080 -p [::]:8080 -I index.html -I index.htm -I gmap.html
config uhttpd 'xupnpd'                 # 对应一个uhttpd服务
        option listen_http '0.0.0.0:8080 [::]:8080'
        option home '/usr/share/dump1090'
        option rfc1918_filter '1'
        option max_requests '3'                            # 并发请求数
        option max_connections '100'                       # 并发链接数
        option script_timeout '60'
        option network_timeout '30'
        option http_keepalive '20'
        option tcp_keepalive '1'
        option index_page 'index.html index.htm gmap.html' # 被用于索引的文件路径

/usr/sbin/uhttpd -f -h /www/cgi-bin/splash/ -r OpenWrt -k 0 -E /splash.sh -n 3 -p 8082 -i .sh=/bin/ash -I splash.sh
config uhttpd 'splash'                   # 对应一个uhttpd服务
        option home '/www/cgi-bin/splash/'
        option interpreter '.sh=/bin/ash'
        option listen_http '8082'
        option index_page 'splash.sh'
        option error_page '/splash.sh'                     # 404页面
        option http_keepalive '0'
        
uHTTPd

uHTTPd 是一个 OpenWrt/LUCI 开发者从头编写的 Web 服务器。 它着力于实现一个稳定高效的服务器，能够满足嵌入式设备的轻量级任务需求，且能够与 OpenWrt 的配置框架 (UCI) 整合。默认情况下它被用于 OpenWrt 的 Web 管理接口 LuCI。当然，uHTTPd 也能提供一个常规 Web 服务器所需要的所有功能。
编译

Uhttp的编译时cmake编译系统，按照cmake编译方法编译即可。Uhttp是基于ubox ubus json-c的，如果加上SSL ，还需要openssl库。

$ git clone https://github.com/json-c/json-c.git
$ cd json-c
$ ./autogen.sh --configure
$ make
$ make install

$ git clone git://git.openwrt.org/project/libubox.git
$ cd libubox
$ cmake -DCMAKE_INSTALL_PREFIX=/usr -DBUILD_LUA=off
$ make
$ make install

$ git clone git://git.openwrt.org/project/ubus.git
$ cd ubus
$ cmake -DBUILD_LUA=off
$ make
$ make install

最后编译安装uhttpd。（注意：CMakeLIsts.txt中的编译新增了-Werror选项，所有警告会当成错误进行处理）

$ cd uhttpd/build
$ cmake ..
$ make
$ make install

配置项
Usage: ./uhttpd -p [addr:]port [-h docroot]
        -f              Do not fork to background
        -c file         Configuration file, default is '/etc/httpd.conf'
        -p [addr:]port  Bind to specified address and port, multiple allowed
        -s [addr:]port  Like -p but provide HTTPS on this port
        -C file         ASN.1 server certificate file
        -K file         ASN.1 server private key file
        -h directory    Specify the document root, default is '.'
        -E string       Use given virtual URL as 404 error handler
        -I string       Use given filename as index for directories, multiple allowed
        -S              Do not follow symbolic links outside of the docroot
        -D              Do not allow directory listings, send 403 instead
        -R              Enable RFC1918 filter
        -n count        Maximum allowed number of concurrent requests
        -l string       URL prefix for Lua handler, default is '/lua'
        -L file         Lua handler script, omit to disable Lua
        -u string       URL prefix for HTTP/JSON handler
        -U file         Override ubus socket path
        -x string       URL prefix for CGI handler, default is '/cgi-bin'
        -i .ext=path    Use interpreter at path for files with the given extension
        -t seconds      CGI, Lua and UBUS script timeout in seconds, default is 60
        -T seconds      Network timeout in seconds, default is 30
        -d string       URL decode given string
        -r string       Specify basic auth realm
        -m string       MD5 crypt given string