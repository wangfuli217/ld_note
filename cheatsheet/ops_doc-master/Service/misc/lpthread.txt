

如果用gcc编译使用了POSIX thread的程序时，通常需要加额外的选项，以便使用thread-safe的库及头文件，一些老的书里说直接增加链接选项 -lpthread 就可以了。
而gcc手册里则指出应该在编译和链接时都增加 -pthread 选项。
编译选项中指定 -pthread 会附加一个宏定义 -D_REENTRANT，该宏会导致 libc 头文件选择那些thread-safe的实现；
链接选项中指定 -pthread 则同 -lpthread 一样，只表示链接 POSIX thread 库。
由于 libc 用于适应 thread-safe 的宏定义可能变化，因此在编译和链接时都使用 -pthread 选项而不是传统的 -lpthread 能够保持向后兼容，并提高命令行的一致性。