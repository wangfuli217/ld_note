http://www.jizhuomi.com/software/771.html

3. 需要VLAN间通信时怎么办
那么，当我们需要在不同的VLAN间通信时又该如何是好呢?
请大家再次回忆一下：VLAN是广播域。而通常两个广播域之间由路由器连接，广播域之间来往的数据包都是由路由器中继的。因此，VLAN间的通信也需要路由器提供中继服务，这被称作“VLAN间路由”。
VLAN间路由，可以使用普通的路由器，也可以使用三层交换机。


VLAN的访问链接(Access Link)
---------------------------------------
1.交换机的端口类型
交换机的端口，可以分为以下两种：
(1)访问链接(Access Link)
(2)汇聚链接(Trunk Link)


2.访问链接
---------------------------------------
访问链接，指的是"只属于一个VLAN，且仅向该VLAN转发数据帧"的端口。在大多数情况下，访问链接所连的是客户机。
通常设置VLAN的顺序是：
(1)生成VLAN
(2)设定访问链接(决定各端口属于哪一个VLAN)
设定访问链接的手法，可以是事先固定的、也可以是根据所连的计算机而动态改变设定。
前者被称为"静态VLAN"、后者自然就是"动态VLAN"了。

静态VLAN——基于端口
静态VLAN又被称为基于端口的VLAN(PortBased VLAN)。顾名思义，就是明确指定各端口属于哪个VLAN的设定方法。

● 动态VLAN
另一方面，动态VLAN则是根据每个端口所连的计算机，随时改变端口所属的VLAN。这就可以避免上述的更改设定之类的操作。动态VLAN可以大致分为3类：
(1)基于MAC地址的VLAN(MAC Based VLAN)
(2)基于子网的VLAN(Subnet Based VLAN)
(3)基于用户的VLAN(User Based VLAN)
其间的差异，主要在于根据OSI参照模型哪一层的信息决定端口所属的VLAN。

● 基于MAC地址的VLAN
基于MAC地址的VLAN，就是通过查询并记录端口所连计算机上网卡的MAC地址来决定端口的所属。
由于是基于MAC地址决定所属VLAN的，因此可以理解为这是一种在OSI的第二层设定访问链接的办法。
但是，基于MAC地址的VLAN，在设定时必须调查所连接的所有计算机的MAC地址并加以登录。
而且如果计算机交换了网卡，还是需要更改设定。

● 基于IP地址的VLAN
基于子网的VLAN，则是通过所连计算机的IP地址，来决定端口所属VLAN的。不像基于MAC地址的VLAN，
即使计算机因为交换了网卡或是其他原因导致MAC地址改变，只要它的IP地址不变，就仍可以加入原先
设定的VLAN。

● 基于用户的VLAN，
则是根据交换机各端口所连的计算机上当前登录的用户，来决定该端口属于哪个VLAN。
这里的用户识别信息，一般是计算机操作系统登录的用户，比如可以是Windows域中使用的用户名。
这些用户名信息，属于OSI第四层以上的信息。
总的来说，决定端口所属VLAN时利用的信息在OSI中的层面越高，就越适于构建灵活多变的网络。


VLAN的汇聚链接(Trunk Link)
---------------------------------------
1.需要设置跨越多台交换机的VLAN时……
2.何谓汇聚链接?
汇聚链接(Trunk Link)指的是能够转发多个不同VLAN的通信的端口。
汇聚链路上流通的数据帧，都被附加了用于识别分属于哪个VLAN的特殊信息。

VLAN的汇聚方式——IEEE802.1Q与ISL

1.汇聚方式
在交换机的汇聚链接上，可以通过对数据帧附加VLAN信息，构建跨越多台交换机的VLAN。
附加VLAN信息的方法，最具有代表性的有：
(1)IEEE 802.1Q
(2)ISL

现在就让我们看看这两种协议分别如何对数据帧附加VLAN信息。
2.IEEE 802.1Q
IEEE 802.1Q，俗称“Dot One Q”，是经过IEEE认证的对数据帧附加VLAN识别信息的协议。