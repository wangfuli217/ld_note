线程、函数和用户自定义数据，一张表与之关联，即环境表，环境表也是章普通表，多个对象可以共享同一个环境表。

被创建的线程共享创建线程的环境。
被创建的用户数据和C函数共享 创建者（C函数）的环境。
Non-nested Lua 函数（由loadfile和loastring和load）被创建后， 共享创建者（线程）的环境。
Nested Lua函数被创建，共享创建者（Lua函数）的环境。

关联线程的环境， 被称作全局环境。 线程和Non-nested函数被线程创建后， 默认的环境就是全局环境， 这些环境可以被C代码直接访问。

http://www.cnblogs.com/lightsong/tag/LUA/
https://wuzhiwei.net/category/lua/

http://timothyqiu.com/archives/lua-note-coroutines/