-- alltest.lua
-- Test suite for all library.

require "all.string"

function assert_equal(a, b)
  if a ~= b then error(tostring(a) .. " == " .. tostring(b), 2) end
end

assert_equal(trim(""), "")
assert_equal(trim("   "), "")
assert_equal(trim("12"), "12")
assert_equal(trim(" 12 "), "12")
assert_equal(trim("  1 2  "), "1 2")
assert_equal(trim("\r\n\t\f 1\r\n\t\f\ "), "1")

assert_equal(ltrim(""), "")
assert_equal(trim("   "), "")
assert_equal(ltrim("12"), "12")
assert_equal(ltrim(" 12 "), "12 ")
assert_equal(ltrim("  1 2  "), "1 2  ")
assert_equal(ltrim("\r\n\t\f 1\r\n\t\f\ "), "1\r\n\t\f ")

assert_equal(rtrim(""), "")
assert_equal(trim("   "), "")
assert_equal(rtrim("12"), "12")
assert_equal(rtrim(" 12 "), " 12")
assert_equal(rtrim("  1 2  "), "  1 2")
assert_equal(rtrim("\r\n\t\f 1\r\n\t\f\ "), "\r\n\t\f\ 1")

assert_equal(subst("", {}), "")
assert_equal(subst("aa=$(aa),bb_=$(bb_)", {aa=1,bb_=2}), "aa=1,bb_=2")
assert_equal(subst("a=$(a)", {a=false}), "a=false")
assert_equal(subst("a=$(a),b=$(b),c=$(c)", {a=4,b=2,c=nil}), "a=4,b=2,c=$(c)")

print("done")