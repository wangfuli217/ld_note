function DeepClone(object)
  local lookup_table = {}
  local function Copy(object)
    if type(object) ~= 'table' then
      return object
    elseif lookup_table[object] then
      return lookup_table[object]
    end

    local new_table = {}
    lookup_table[object] = new_table
    for key, value in pairs(object) do 
      new_table[Copy(key)] = Copy(value)
    end

    return setmetatable(new_table, getmetatable(object))
  end

  return Copy(object)
end